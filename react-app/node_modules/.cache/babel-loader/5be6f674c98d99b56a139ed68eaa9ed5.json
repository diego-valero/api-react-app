{"ast":null,"code":"\"use strict\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nclass Route {\n  constructor(connection, path = \"\", headers = {}) {\n    if (!path) path = \"\";else if (path.charAt(0) !== \"/\") path = `/${path}`;\n    this._connection = connection;\n    this._path = path;\n    this._headers = headers;\n  }\n\n  route(path, headers) {\n    if (!path) path = \"\";else if (path.charAt(0) !== \"/\") path = `/${path}`;\n    return new Route(this._connection, this._path + path, Object.assign({}, this._headers, headers));\n  }\n\n  request(_a) {\n    var {\n      method,\n      path,\n      headers = {}\n    } = _a,\n        opts = __rest(_a, [\"method\", \"path\", \"headers\"]);\n\n    if (!path) opts.path = \"\";else if (this._path && path.charAt(0) !== \"/\") opts.path = `/${path}`;else opts.path = path;\n    opts.basePath = this._path;\n    opts.headers = Object.assign({}, this._headers, headers);\n    opts.method = method ? method.toUpperCase() : \"GET\";\n    return this._connection.request(opts);\n  }\n\n  _request1(method, ...args) {\n    let path = \"\";\n    let qs;\n    let headers;\n\n    if (args[0] === undefined || typeof args[0] === \"string\") {\n      path = args.shift();\n    }\n\n    if (args[0] === undefined || typeof args[0] === \"object\") {\n      qs = args.shift();\n    }\n\n    if (args[0] === undefined || typeof args[0] === \"object\") {\n      headers = args.shift();\n    }\n\n    return this.request({\n      method,\n      path,\n      qs,\n      headers\n    });\n  }\n\n  _request2(method, ...args) {\n    let path = \"\";\n    let body = undefined;\n    let qs;\n    let headers;\n\n    if (args[0] === undefined || typeof args[0] === \"string\") {\n      path = args.shift();\n    }\n\n    body = args.shift();\n\n    if (args[0] === undefined || typeof args[0] === \"object\") {\n      qs = args.shift();\n    }\n\n    if (args[0] === undefined || typeof args[0] === \"object\") {\n      headers = args.shift();\n    }\n\n    return this.request({\n      method,\n      path,\n      body,\n      qs,\n      headers\n    });\n  }\n\n  delete(...args) {\n    return this._request1(\"DELETE\", ...args);\n  }\n\n  get(...args) {\n    return this._request1(\"GET\", ...args);\n  }\n\n  head(...args) {\n    return this._request1(\"HEAD\", ...args);\n  }\n\n  patch(...args) {\n    return this._request2(\"PATCH\", ...args);\n  }\n\n  post(...args) {\n    return this._request2(\"POST\", ...args);\n  }\n\n  put(...args) {\n    return this._request2(\"PUT\", ...args);\n  }\n\n}\n\nexports.Route = Route;","map":{"version":3,"sources":["../../src/route.ts"],"names":[],"mappings":"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","sourcesContent":["import { ArangojsResponse } from \"./util/request\";\nimport { Connection } from \"./connection\";\n\nexport class Route {\n  private _connection: Connection;\n  private _path: string;\n  private _headers: Object;\n\n  constructor(connection: Connection, path: string = \"\", headers: Object = {}) {\n    if (!path) path = \"\";\n    else if (path.charAt(0) !== \"/\") path = `/${path}`;\n    this._connection = connection;\n    this._path = path;\n    this._headers = headers;\n  }\n\n  route(path: string, headers?: Object) {\n    if (!path) path = \"\";\n    else if (path.charAt(0) !== \"/\") path = `/${path}`;\n    return new Route(this._connection, this._path + path, {\n      ...this._headers,\n      ...headers\n    });\n  }\n\n  request({ method, path, headers = {}, ...opts }: any) {\n    if (!path) opts.path = \"\";\n    else if (this._path && path.charAt(0) !== \"/\") opts.path = `/${path}`;\n    else opts.path = path;\n    opts.basePath = this._path;\n    opts.headers = { ...this._headers, ...headers };\n    opts.method = method ? method.toUpperCase() : \"GET\";\n    return this._connection.request(opts);\n  }\n\n  private _request1(method: string, ...args: any[]) {\n    let path: string = \"\";\n    let qs: Object | undefined;\n    let headers: Object | undefined;\n    if (args[0] === undefined || typeof args[0] === \"string\") {\n      path = args.shift();\n    }\n    if (args[0] === undefined || typeof args[0] === \"object\") {\n      qs = args.shift();\n    }\n    if (args[0] === undefined || typeof args[0] === \"object\") {\n      headers = args.shift();\n    }\n    return this.request({ method, path, qs, headers });\n  }\n\n  private _request2(method: string, ...args: any[]) {\n    let path: string = \"\";\n    let body: any = undefined;\n    let qs: Object | undefined;\n    let headers: Object | undefined;\n    if (args[0] === undefined || typeof args[0] === \"string\") {\n      path = args.shift();\n    }\n    body = args.shift();\n    if (args[0] === undefined || typeof args[0] === \"object\") {\n      qs = args.shift();\n    }\n    if (args[0] === undefined || typeof args[0] === \"object\") {\n      headers = args.shift();\n    }\n    return this.request({ method, path, body, qs, headers });\n  }\n\n  delete(): Promise<ArangojsResponse>;\n  delete(path?: string): Promise<ArangojsResponse>;\n  delete(path?: string, qs?: Object): Promise<ArangojsResponse>;\n  delete(qs?: Object): Promise<ArangojsResponse>;\n  delete(qs?: Object, headers?: Object): Promise<ArangojsResponse>;\n  delete(\n    path?: string,\n    qs?: Object,\n    headers?: Object\n  ): Promise<ArangojsResponse>;\n  delete(...args: any[]): Promise<ArangojsResponse> {\n    return this._request1(\"DELETE\", ...args);\n  }\n\n  get(): Promise<ArangojsResponse>;\n  get(path?: string): Promise<ArangojsResponse>;\n  get(path?: string, qs?: Object): Promise<ArangojsResponse>;\n  get(path?: string, qs?: Object, headers?: Object): Promise<ArangojsResponse>;\n  get(qs?: Object): Promise<ArangojsResponse>;\n  get(qs?: Object, headers?: Object): Promise<ArangojsResponse>;\n  get(...args: any[]): Promise<ArangojsResponse> {\n    return this._request1(\"GET\", ...args);\n  }\n\n  head(): Promise<ArangojsResponse>;\n  head(path?: string): Promise<ArangojsResponse>;\n  head(path?: string, qs?: Object): Promise<ArangojsResponse>;\n  head(path?: string, qs?: Object, headers?: Object): Promise<ArangojsResponse>;\n  head(qs?: Object): Promise<ArangojsResponse>;\n  head(qs?: Object, headers?: Object): Promise<ArangojsResponse>;\n  head(...args: any[]): Promise<ArangojsResponse> {\n    return this._request1(\"HEAD\", ...args);\n  }\n\n  patch(): Promise<ArangojsResponse>;\n  patch(path?: string): Promise<ArangojsResponse>;\n  patch(path?: string, body?: any): Promise<ArangojsResponse>;\n  patch(path?: string, body?: any, qs?: Object): Promise<ArangojsResponse>;\n  patch(body?: any): Promise<ArangojsResponse>;\n  patch(body?: any, qs?: Object): Promise<ArangojsResponse>;\n  patch(body?: any, qs?: Object, headers?: Object): Promise<ArangojsResponse>;\n  patch(\n    path?: string,\n    body?: any,\n    qs?: Object,\n    headers?: Object\n  ): Promise<ArangojsResponse>;\n  patch(...args: any[]): Promise<ArangojsResponse> {\n    return this._request2(\"PATCH\", ...args);\n  }\n\n  post(): Promise<ArangojsResponse>;\n  post(path?: string): Promise<ArangojsResponse>;\n  post(path?: string, body?: any): Promise<ArangojsResponse>;\n  post(path?: string, body?: any, qs?: Object): Promise<ArangojsResponse>;\n  post(body?: any): Promise<ArangojsResponse>;\n  post(body?: any, qs?: Object): Promise<ArangojsResponse>;\n  post(body?: any, qs?: Object, headers?: Object): Promise<ArangojsResponse>;\n  post(\n    path?: string,\n    body?: any,\n    qs?: Object,\n    headers?: Object\n  ): Promise<ArangojsResponse>;\n  post(...args: any[]): Promise<ArangojsResponse> {\n    return this._request2(\"POST\", ...args);\n  }\n\n  put(): Promise<ArangojsResponse>;\n  put(path?: string): Promise<ArangojsResponse>;\n  put(path?: string, body?: any): Promise<ArangojsResponse>;\n  put(path?: string, body?: any, qs?: Object): Promise<ArangojsResponse>;\n  put(body?: any): Promise<ArangojsResponse>;\n  put(body?: any, qs?: Object): Promise<ArangojsResponse>;\n  put(body?: any, qs?: Object, headers?: Object): Promise<ArangojsResponse>;\n  put(\n    path?: string,\n    body?: any,\n    qs?: Object,\n    headers?: Object\n  ): Promise<ArangojsResponse>;\n  put(...args: any[]): Promise<ArangojsResponse> {\n    return this._request2(\"PUT\", ...args);\n  }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}